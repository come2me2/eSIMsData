# üõí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–∫—É–ø–æ–∫ —Å eSIM Go API

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ü–æ–∏—Å–∫ Bundle
**Endpoint:** `GET /api/esimgo/find-bundle`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `country` - –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (ISO, –Ω–∞–ø—Ä–∏–º–µ—Ä: "TH")
- `dataAmount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –≤ MB (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1000 –¥–ª—è 1GB)
- `duration` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –¥–Ω—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: 7)
- `unlimited` - true/false (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
const response = await fetch('/api/esimgo/find-bundle?country=TH&dataAmount=1000&duration=7&unlimited=false');
const data = await response.json();
// data.data.bundleName = "esim_1GB_7D_TH_V2"
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
**Endpoint:** `POST /api/esimgo/order`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "bundle_name": "esim_1GB_7D_TH_V2",
  "telegram_user_id": 123456789,
  "telegram_username": "username",
  "user_name": "John Doe",
  "country_code": "TH",
  "country_name": "Thailand",
  "plan_id": "plan1",
  "plan_type": "standard"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "orderReference": "123e4567-e89b-12d3-a456-426614174000",
    "status": "completed",
    "assignments": {
      "iccid": "8944123456789012345",
      "matchingId": "A1B2-C3D4-E5F6-G7H8",
      "smdpAddress": "http://smdp.example.com",
      "profileStatus": "Released"
    }
  }
}
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ QR –∫–æ–¥–∞
**Endpoint:** `GET /api/esimgo/assignments?reference=ORDER_REFERENCE`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è QR –∫–æ–¥–∞, –µ—Å–ª–∏ –æ–Ω –Ω–µ –±—ã–ª –ø–æ–ª—É—á–µ–Ω —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ checkout.js

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–ª–∞–Ω** ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è `dataAmount` –∏ `duration`
2. **–ü–æ–∏—Å–∫ bundle** ‚Üí –≤—ã–∑–æ–≤ `/api/esimgo/find-bundle` –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ bundle
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞** ‚Üí –≤—ã–∑–æ–≤ `/api/esimgo/order` —Å bundle_name
4. **–ü–æ–ª—É—á–µ–Ω–∏–µ QR –∫–æ–¥–∞** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ `/api/esimgo/assignments`
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** ‚Üí –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage (–ø–æ–∫–∞ –Ω–µ—Ç –ë–î)

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞–Ω–∞

### Standard Plans
```javascript
{
  data: '1 GB',      // ‚Üí 1000 MB
  duration: '7 Days', // ‚Üí 7 –¥–Ω–µ–π
  price: '$ 9.99',
  id: 'plan1'
}
```

### Unlimited Plans
```javascript
{
  data: '‚àû GB',
  duration: '7 Days',
  price: '$ 9.99',
  id: 'unlimited1'
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:** "1 GB" ‚Üí 1000 MB (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 1000)
2. **–ü–æ–∏—Å–∫ bundle:** –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –Ω–µ—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. **–•—Ä–∞–Ω–µ–Ω–∏–µ:** –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è localStorage, –ø–æ–∑–∂–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ë–î

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ checkout.html —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
   ```
   checkout.html?type=country&code=TH&name=Thailand&plan=plan1&planType=standard
   ```

2. –ù–∞–∂–º–∏—Ç–µ "Purchase"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ª–æ–≥–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –∏ QR –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω

## üîú –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø–æ–∫–∞–∑–∞ QR –∫–æ–¥–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –ë–î –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞, bundle –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ç.–¥.)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π

