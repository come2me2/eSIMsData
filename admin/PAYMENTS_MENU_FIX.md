# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º –º–µ–Ω—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Payments

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ payments.html –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–æ—Å—å –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—É–Ω–∫—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

## –ü—Ä–∏—á–∏–Ω–∞
–í–æ–∑–º–æ–∂–Ω–æ, –¥—Ä—É–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, payments.js) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `stopPropagation()` –∏–ª–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–ª–∏ –≤—Å–ø–ª—ã—Ç–∏–µ —Å–æ–±—ã—Ç–∏–π, —á—Ç–æ –º–µ—à–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é —Å—Ä–∞–±–æ—Ç–∞—Ç—å.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Capture Phase
–ò–∑–º–µ–Ω–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ–∞–∑—ã –∑–∞—Ö–≤–∞—Ç–∞ (capture phase) –≤–º–µ—Å—Ç–æ —Ñ–∞–∑—ã –≤—Å–ø–ª—ã—Ç–∏—è (bubbling phase):

```javascript
link.addEventListener('click', function(e) {
    if (window.innerWidth <= 1024) {
        closeMenu();
    }
}, true); // true = capture phase
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ capture phase:**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –î–û —Ç–æ–≥–æ, –∫–∞–∫ —Å–æ–±—ã—Ç–∏–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `stopPropagation()` –≤ –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã console.log —Å–æ–æ–±—â–µ–Ω–∏—è:
- `[MobileMenu] Found X navigation links` - –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `[MobileMenu] Nav link clicked` - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—É–Ω–∫—Ç –º–µ–Ω—é
- `[MobileMenu] Closing menu` - –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
- `[MobileMenu] Initialization complete` - —É—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Logout –∫–Ω–æ–ø–∫–∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç capture phase
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Event Phases (–§–∞–∑—ã —Å–æ–±—ã—Ç–∏–π)

```
1. Capture Phase (—Ñ–∞–∑–∞ –∑–∞—Ö–≤–∞—Ç–∞) ‚¨áÔ∏è
   window ‚Üí document ‚Üí body ‚Üí ... ‚Üí target element
   
2. Target Phase (—Ü–µ–ª–µ–≤–∞—è —Ñ–∞–∑–∞) üéØ
   target element
   
3. Bubbling Phase (—Ñ–∞–∑–∞ –≤—Å–ø–ª—ã—Ç–∏—è) ‚¨ÜÔ∏è
   target element ‚Üí ... ‚Üí body ‚Üí document ‚Üí window
```

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–ë–µ–∑ capture (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
```javascript
// –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –¥—Ä—É–≥–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
link.addEventListener('click', handler); // Bubbling phase
```

**–° capture (–Ω–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ):**
```javascript
// –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—ã–º, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
link.addEventListener('click', handler, true); // Capture phase
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ payments.html –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ –æ–∫–Ω–æ
3. –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é
4. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π –ø—É–Ω–∫—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
5. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏:
   ```
   [MobileMenu] Nav link clicked (index: X), closing menu
   [MobileMenu] Closing menu
   ```

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- ‚úÖ –ú–µ–Ω—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ª—é–±–æ–π –ø—É–Ω–∫—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ú–µ–Ω—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–í—ã–π—Ç–∏"
- ‚úÖ –ú–µ–Ω—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
- ‚úÖ –ú–µ–Ω—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ESC
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

## –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã
- `/admin/js/mobile-menu.js` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ capture phase –∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- [MDN: Event.stopPropagation()](https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation)
- [MDN: EventTarget.addEventListener()](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)
- [Event Phases Explained](https://javascript.info/bubbling-and-capturing)

