# –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω —Ç–∞—Ä–∏—Ñ–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω –∏–∑ eSIM Go API (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)

**–§–∞–π–ª:** `api/esimgo/plans.js`

–¶–µ–Ω—ã –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ API eSIM Go –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `groupBundlesIntoPlans()`:
- –¶–µ–Ω–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ–ª–µ–π bundle: `price`, `pricePerUnit`, `cost`, `amount`, `fee`, `totalPrice`, `userPrice`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `plan.priceValue` (—á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `plan.price` (—Å—Ç—Ä–æ–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä "$ 2.26")

**–≠—Ç–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç eSIM Go –±–µ–∑ –Ω–∞—Ü–µ–Ω–æ–∫.**

---

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –Ω–∞—Ü–µ–Ω–∫–∏ (–∏–∑ –∞–¥–º–∏–Ω–∫–∏)

**–§–∞–π–ª:** `api/esimgo/plans.js` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1294
**–§—É–Ω–∫—Ü–∏—è:** `applyMarkupToPlans(responseData, countryCode)`
**–ú–æ–¥—É–ª—å:** `api/_lib/markup-settings.js`

**–õ–æ–≥–∏–∫–∞:**
```javascript
if (!markup.enabled) {
    console.log('[Markup] Markup is disabled, returning original prices');
    return plansData; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ü–µ–Ω—ã –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)
}
```

**–ï—Å–ª–∏ –Ω–∞—Ü–µ–Ω–∫–∞ –í–´–ö–õ–Æ–ß–ï–ù–ê (`markup.enabled === false`):**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –¶–µ–Ω—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ eSIM Go
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω—ã –±–µ–∑ –Ω–∞—Ü–µ–Ω–∫–∏

**–ï—Å–ª–∏ –Ω–∞—Ü–µ–Ω–∫–∞ –í–ö–õ–Æ–ß–ï–ù–ê (`markup.enabled === true`):**
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –Ω–∞—Ü–µ–Ω–∫–∞: `priceValue * baseMarkup`
- –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Ü–µ–Ω–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–µ: `priceValue * baseMarkup * countryMarkup`
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è `priceValue` –∏ `price` –≤ –∫–∞–∂–¥–æ–º –ø–ª–∞–Ω–µ

**–ü—Ä–∏–º–µ—Ä:**
```
–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å eSIM Go: $2.26
–ë–∞–∑–æ–≤–∞—è –Ω–∞—Ü–µ–Ω–∫–∞: 1.29 (29%)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–¶–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: $2.26 √ó 1.29 = $2.92
```

---

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã (–Ω–∞ checkout)

**–§–∞–π–ª:** `public/checkout.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `updateTotalPrice()`

**–õ–æ–≥–∏–∫–∞:**
- –ë–µ—Ä–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –∏–∑ API –ø–ª–∞–Ω–æ–≤ (—É–∂–µ —Å –±–∞–∑–æ–≤–æ–π –Ω–∞—Ü–µ–Ω–∫–æ–π, –µ—Å–ª–∏ –æ–Ω–∞ –≤–∫–ª—é—á–µ–Ω–∞)
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∞ –≤–∫–ª—é—á–µ–Ω–∞:
  - Telegram Stars: `paymentMethods.telegramStars.markupMultiplier`
  - Crypto: `paymentMethods.crypto.markupMultiplier`
  - Bank Card: `paymentMethods.bankCard.markupMultiplier`

**–ï—Å–ª–∏ –Ω–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –í–´–ö–õ–Æ–ß–ï–ù–ê:**
- ‚úÖ –¶–µ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ü–µ–Ω—É –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Ü–µ–Ω–∫–∏

**–ü—Ä–∏–º–µ—Ä:**
```
–¶–µ–Ω–∞ —Å –±–∞–∑–æ–≤–æ–π –Ω–∞—Ü–µ–Ω–∫–æ–π: $2.92
–ù–∞—Ü–µ–Ω–∫–∞ Telegram Stars: 1.05 (5%)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: $2.92 √ó 1.05 = $3.07
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞: –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –≤—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã?

### –°—Ü–µ–Ω–∞—Ä–∏–π: –í—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã –≤ –∞–¥–º–∏–Ω–∫–µ

1. **API `/api/esimgo/plans`:**
   - –ü–æ–ª—É—á–∞–µ—Ç —Ü–µ–Ω—ã –∏–∑ eSIM Go (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å): `$2.26`
   - –í—ã–∑—ã–≤–∞–µ—Ç `applyMarkupToPlans()`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `markup.enabled === false`
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã: `$2.26`

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ü–µ–Ω—É: `$2.26` (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)

3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ checkout:**
   - –ë–µ—Ä–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: `$2.26`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
   - –ï—Å–ª–∏ –Ω–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã —Ç–æ–∂–µ –≤—ã–∫–ª—é—á–µ–Ω–∞:
     - ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: `$2.26` (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)

---

## üìù –í—ã–≤–æ–¥

**–î–ê, –ª–æ–≥–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!**

–ö–æ–≥–¥–∞ –≤—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã –≤ –∞–¥–º–∏–Ω–∫–µ:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω—ã –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ eSIM Go
- ‚úÖ –ù–∏–∫–∞–∫–∏–µ –Ω–∞—Ü–µ–Ω–∫–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- ‚úÖ –¶–µ–Ω—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö

**–§–æ—Ä–º—É–ª–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã:**
```
–§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ = –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å eSIM Go √ó –ë–∞–∑–æ–≤–∞—è –Ω–∞—Ü–µ–Ω–∫–∞ √ó –ù–∞—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã

–ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã:
–§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ = –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å eSIM Go √ó 1.0 √ó 1.0 = –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å eSIM Go
```

---

## üîç –ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ü–µ–Ω–æ–∫

**–§–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫:** `data/admin-settings.json`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "markup": {
    "enabled": false,  // ‚Üê –ï—Å–ª–∏ false, –±–∞–∑–æ–≤–∞—è –Ω–∞—Ü–µ–Ω–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
    "base": 1.29,
    "defaultMultiplier": 1.29,
    "countryMarkups": {}
  },
  "paymentMethods": {
    "telegramStars": {
      "enabled": false,  // ‚Üê –ï—Å–ª–∏ false, –Ω–∞—Ü–µ–Ω–∫–∞ Stars –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
      "markupMultiplier": 1.05
    },
    "crypto": {
      "enabled": false,  // ‚Üê –ï—Å–ª–∏ false, –Ω–∞—Ü–µ–Ω–∫–∞ Crypto –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
      "markupMultiplier": 1.0
    },
    "bankCard": {
      "enabled": false,  // ‚Üê –ï—Å–ª–∏ false, –Ω–∞—Ü–µ–Ω–∫–∞ Bank Card –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
      "markupMultiplier": 1.1
    }
  }
}
```

---

## üìç –ú–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ, –≥–¥–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Ü–µ–Ω—ã

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ü–µ–Ω –∏–∑ eSIM Go:**
   - `api/esimgo/plans.js` ‚Üí `groupBundlesIntoPlans()` (—Å—Ç—Ä–æ–∫–∏ 40-306)
   - –¶–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `plan.priceValue` –∏ `plan.price`

2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –Ω–∞—Ü–µ–Ω–∫–∏:**
   - `api/esimgo/plans.js` ‚Üí —Å—Ç—Ä–æ–∫–∞ 1294: `applyMarkupToPlans(responseData, countryCode)`
   - `api/_lib/markup-settings.js` ‚Üí `applyMarkupToPlans()` (—Å—Ç—Ä–æ–∫–∏ 129-208)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if (!markup.enabled) return plansData;` (—Å—Ç—Ä–æ–∫–∞ 136-138)

3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Ü–µ–Ω–∫–∏ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã:**
   - `public/checkout.js` ‚Üí `updateTotalPrice()` (—Å—Ç—Ä–æ–∫–∏ 968-1027)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if (paymentMethod.enabled && paymentMethod.markupMultiplier)` (—Å—Ç—Ä–æ–∫–∞ 990)

---

## ‚úÖ –ò—Ç–æ–≥

**–ï—Å–ª–∏ –≤—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã –≤ –∞–¥–º–∏–Ω–∫–µ:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ü–µ–Ω—ã –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ eSIM Go
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–∏–∫–∞–∫–∏–µ –Ω–∞—Ü–µ–Ω–∫–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É ‚Üí Payments ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–∞—Ü–µ–Ω–∫–∏ –≤—ã–∫–ª—é—á–µ–Ω—ã (`enabled: false`)

