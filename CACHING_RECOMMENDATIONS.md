# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üéØ –¶–µ–ª—å
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã **–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ** –≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫—ç—à–∞.

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ JSON —Ñ–∞–π–ª—ã + Memory Cache

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
    ‚Üì
1. Memory Cache (—Å–µ—Å—Å–∏—è) ‚Üí HIT? ‚Üí ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ
    ‚Üì –ù–µ—Ç
2. Static JSON File (/data/*.json) ‚Üí HIT? ‚Üí ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ (nginx)
    ‚Üì –ù–µ—Ç
3. API Request ‚Üí –ü–æ–ª—É—á–µ–Ω–∏–µ ‚Üí Memory Cache ‚Üí –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –æ—Ç–¥–∞—é—Ç—Å—è nginx –Ω–∞–ø—Ä—è–º—É—é (< 50ms)
2. **‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: –§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫—ç—à–∞
3. **üìâ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞**: API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback
4. **üéØ –ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üîÑ –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫—ç—à?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å (localStorage + Memory)

**–ü–ª—é—Å—ã:**
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ö–∞–∂–¥—ã–π —Ä–∞–∑ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å API (–º–µ–¥–ª–µ–Ω–Ω–æ)
- ‚ùå –ù–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í—ã–≤–æ–¥:** ‚ùå **–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ localStorage, –æ—Å—Ç–∞–≤–∏—Ç—å Memory Cache

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏ (Memory Cache)
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º (nginx)
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ localStorage
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–æ–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª (–Ω–æ –±—ã—Å—Ç—Ä–æ —á–µ—Ä–µ–∑ nginx)

**–í—ã–≤–æ–¥:** ‚úÖ **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã + Memory Cache

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ nginx)
- ‚úÖ Memory Cache –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–í—ã–≤–æ–¥:** ‚úÖ **–û–ü–¢–ò–ú–ê–õ–¨–ù–û**

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –í–∞—Ä–∏–∞–Ω—Ç | –°–∫–æ—Ä–æ—Å—Ç—å | –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å | –ù–∞–≥—Ä—É–∑–∫–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|----------|--------------|----------|--------------|
| –¢–µ–∫—É—â–∏–π (—Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–æ–π) | üêå –ú–µ–¥–ª–µ–Ω–Ω–æ | ‚úÖ | –í—ã—Å–æ–∫–∞—è | ‚ùå |
| –ë–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫—ç—à–∞ | üêå –ú–µ–¥–ª–µ–Ω–Ω–æ | ‚úÖ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | ‚ùå |
| –¢–æ–ª—å–∫–æ Memory Cache | ‚ö° –ë—ã—Å—Ç—Ä–æ (—Å–µ—Å—Å–∏—è) | ‚úÖ | –°—Ä–µ–¥–Ω—è—è | ‚úÖ |
| **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã + Memory** | ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ** | ‚úÖ | **–ù–∏–∑–∫–∞—è** | ‚úÖ **–û–ü–¢–ò–ú–ê–õ–¨–ù–û** |

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å data-loader.js

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –£–±—Ä–∞—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É localStorage
2. –û—Ç–∫–ª—é—á–∏—Ç—å localStorage –¥–ª—è –ø–ª–∞–Ω–æ–≤ (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Memory Cache)
3. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Static JSON ‚Üí Memory Cache ‚Üí API

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- Memory Cache –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏
- API —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback

### –®–∞–≥ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ `/api/cache/prefill`
2. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫—ç—à–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JSON —Ñ–∞–π–ª—ã
3. –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∞–π–ª—ã –≤ `public/data/`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫—ç—à–∞

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```nginx
location /data/ {
    proxy_cache_valid 200 1h;
    add_header Cache-Control "public, max-age=3600";
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è nginx
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ JSON —Ñ–∞–π–ª—ã + Memory Cache**

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç:
- ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- üìâ –ú–∏–Ω–∏–º–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- üéØ –ü—Ä–æ—Å—Ç—É—é –ª–æ–≥–∏–∫—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Ç–∫–ª—é—á–∏—Ç—å localStorage –¥–ª—è –ø–ª–∞–Ω–æ–≤** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —É–∂–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º —á–µ—Ä–µ–∑ nginx, –ø–æ—ç—Ç–æ–º—É localStorage –Ω–µ –Ω—É–∂–µ–Ω.
